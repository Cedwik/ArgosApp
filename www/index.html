<!DOCTYPE html>
<html xml:lang="en" lang="en">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;">
        <title>My Location</title>
        <link rel="stylesheet" href="https://developers.google.com/maps/documentation/javascript/examples/default.css" type="text/css"></link>
        <script type="text/javascript" charset="utf-8" src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
        <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCDRU_hzB5XTYUQ5vWe1dpHffk053tR4Sg&sensor=false"> </script>
        <script type="text/javascript" charset="utf-8" src="phonegap.js"></script>
 
        <style>
 
        body {
            background:#000000;
            font-family:Helvetica;
            font-size:75%;
            margin:0;
            padding:0;
        }
 
        .btn{
            border: 2px solid #222222;
            -webkit-border-radius: 9px;
            border-radius: 9px;
            text-align:center;
            display:block;
            background:#eeeeee;
            width:280px;
            color:#222;
            text-decoration:none;
            padding:10px;
            margin:12px;
        }
 
        </style>
        <script type="text/javascript" charset="utf-8">
 
        function findMyLocation() {
            //Check the network connection
            var networkConnection = navigator.network.connection.type;
            if (networkConnection != null) {
                //Find your location
                navigator.geolocation.getCurrentPosition(success, error);
            }
            else{
                alert('Please check your network connection and try again.');
            }
        }
 
        function success(position) {
            var latitude = position.coords.latitude;
            var longitude = position.coords.longitude;
        }
 
        function error(error) {
            alert('Some error occured please try again.');
        }
         
        function getDetails(latitude, longitude) {
            var url = "http://maps.googleapis.com/maps/api/geocode/json?latlng="+latitude+","+longitude+"&sensor=true";
            $.getJSON(url, function(data) {
                var formatted_address = data['results'][0]['formatted_address'];
                htmlData =  'Latitude : ' + latitude + '<br/>';
                htmlData += 'Longitude : ' + longitude + '<br/>';
                htmlData += 'Location : ' + formatted_address;
                $("#location").html('<a href="#" class="btn" onclick="drawMap('+latitude+', '+longitude+');">'+htmlData+'</a>');
            });
        }
 
        function drawMap(latitude, longitude) {
            var centerLocation = new google.maps.LatLng(latitude, longitude);
 
            var myOptions = {
                center: centerLocation,
                zoom: 16,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };
 
            map_element = document.getElementById("map_canvas");
            map = new google.maps.Map(map_element, myOptions);
 
            var marker = new google.maps.Marker({
                position: centerLocation,
                title: "My Current Location!"
            });
            marker.setMap(map);
 
            var mapwidth = $(window).width();
            var mapheight = $(window).height();
            $("#map_canvas").height(mapheight);
            $("#map_canvas").width(mapwidth);
            google.maps.event.trigger(map, 'resize');
        }
		
		 function initialize() {
        var mapOptions = {
          center: new google.maps.LatLng(latitude, longitude),
          zoom: 8
        };
        var map = new google.maps.Map(document.getElementById("map-canvas"),
            mapOptions);
      }
      google.maps.event.addDomListener(window, 'load', initialize);

 
        </script>
 
    </head>
    <body>
        <div align="center">
            <a href="#" class="btn" onclick="findMyLocation();">Find My Location</a>
            <p id="location"></p>
        </div>
        <div id="map_canvas"></div>
    </body>
</html>